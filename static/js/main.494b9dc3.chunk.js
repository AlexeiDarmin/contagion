(this.webpackJsonpcontagion=this.webpackJsonpcontagion||[]).push([[0],{13:function(n,t,e){},14:function(n,t,e){},15:function(n,t,e){"use strict";e.r(t);var i,o=e(0),a=e.n(o),r=e(4),s=e.n(r),c=(e(13),e(1)),u=e(2),l=e(6),v=e(5),h=e(7),f={unitQty:100,unitSize:5};!function(n){n[n.Healthy=1]="Healthy",n[n.Sick=2]="Sick",n[n.Immune=3]="Immune"}(i||(i={}));var d=function n(t,e,o){var a=this;Object(c.a)(this,n),this.x=0,this.y=0,this.vx=0,this.vy=0,this.size=5,this.status=i.Healthy,this.collisionCooldown=!1,this.move=function(){a.x+=a.vx,a.y+=a.vy},this.undoMove=function(){a.x-=a.vx,a.y-=a.vy},this.x=t,this.y=e,this.size=o;var r=m(),s=r.vx,u=r.vy;this.vx=s,this.vy=u},m=function(){var n=Math.random(),t=1-n;return{vx:n*(1==Math.round(b(0,1))?1:-1),vy:t*(1==Math.round(b(0,1))?1:-1)}},y=function(){function n(t){var e=t.unitQty,i=t.unitSize;Object(c.a)(this,n),this.units=void 0,this.units=[];for(var o=0;o<e;o++){var a=g(this.units,i);this.units.push(a)}}return Object(u.a)(n,[{key:"update",value:function(n){var t=n.getContext("2d");if(!t)throw"expected canvas ctx to exist by now";this.units=p(this.units),t.fillStyle="#fff5f5",t.fillRect(0,0,500,250),t.lineWidth=.5;for(var e=0;e<this.units.length;e++){var i=this.units[e],o=i.x,a=i.y,r=i.size;t.fillStyle="green",t.beginPath(),t.arc(o+r/2,a+r/2,r,0,2*Math.PI),t.fill(),t.stroke()}}}]),n}(),p=function(n){for(var t=[],e=function(){var e=n.pop();if(!e)return"continue";x(e);var i=!1;if(e.move(),e.collisionCooldown)return t.push(e),"continue";var o=function(o){var a=n[o];return a?a.collisionCooldown?"continue":(a.move(),w(e,a)?(e.vx*=-1,e.vy*=-1,a.vx*=-1,a.vy*=-1,t.push(e),t.push(a),i=!0,e.collisionCooldown=!0,a.collisionCooldown=!0,setTimeout((function(){return e.collisionCooldown=!1}),100),setTimeout((function(){return a.collisionCooldown=!1}),100),x(a),delete n[o],"break"):void a.undoMove()):"continue"};n:for(var a=0;a<n.length;a++){switch(o(a)){case"continue":continue;case"break":break n}}i||t.push(e)};n.length>0;)e();return t},x=function(n){n.x<0&&(n.vx*=-1),n.x+n.size>=500&&(n.vx*=-1),n.y<0&&(n.vy*=-1),n.y+n.size>=250&&(n.vy*=-1)},g=function(n,t){for(var e=new d(0,0,t),i=b(0,500-t),o=b(0,250-t),a=0;;){e.x=i,e.y=o;for(var r=!0,s=0;s<n.length;s++){var c=n[s];if(w(e,c)){r=!1;break}}if(r)return e;if((i+=t)+t>=500&&(i=0,(o+=t)>=250)){if(1==a)throw"after scanning the entire field, no position available to insert next unit";o=0,a+=1}}},w=function(n,t){if(!n||!t)throw"collides() expects two units to compare, received one or less";var e=2*n.size+1;return Math.abs(n.x-t.x)+Math.abs(n.y-t.y)<=e},b=function(n,t){return Math.floor(Math.random()*(t-n+1))+n},k=function(n){function t(n){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(v.a)(t).call(this,n))).canvasRef=void 0,e.engineInterval=void 0,e.state={engine:new y(f)},e.runAnimationFrame=function(){var n=e.canvasRef.current;n&&e.state.engine.update(n)},e.canvasRef=a.a.createRef(),e}return Object(h.a)(t,n),Object(u.a)(t,[{key:"componentDidMount",value:function(){var n,t;this.engineInterval=setInterval(this.runAnimationFrame,25),null===(n=this.canvasRef.current)||void 0===n||null===(t=n.getContext("2d"))||void 0===t||t.scale(4,4)}},{key:"componentWillUnmount",value:function(){this.engineInterval&&clearInterval(this.engineInterval)}},{key:"render",value:function(){return a.a.createElement("canvas",{id:"mainCanvas",ref:this.canvasRef,width:"".concat(2e3,"px"),height:"".concat(1e3,"px"),style:{width:"".concat(500,"px"),height:"".concat(250,"px")},className:"main-canvas"})}}]),t}(a.a.Component);e(14);var C=function(){return a.a.createElement("div",{className:"App"},a.a.createElement("header",{className:"App-header"},"Contagion",a.a.createElement("div",{className:"App-subheader"},"A simulation of the effects our actions have on the spread of a virus.")),a.a.createElement("div",null,a.a.createElement(k,{key:"main"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()})).catch((function(n){console.error(n.message)}))},8:function(n,t,e){n.exports=e(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.494b9dc3.chunk.js.map